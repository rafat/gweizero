(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4914:(e,t,a)=>{"use strict";a.d(t,{ContractInputCard:()=>h});var s=a(5155),n=a(2115),l=a(3321),r=a(3644);let o=a(1463).env.NEXT_PUBLIC_BACKEND_URL||"http://127.0.0.1:3001";async function i(e){let t=await fetch(`${o}/api/analyze/jobs`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:e})});if(!t.ok){let e=await t.text();throw Error(`Failed to create analysis job (${t.status}): ${e}`)}return t.json()}var d=a(9722),c=a(622);function u(...e){return(0,c.QP)((0,d.$)(e))}function b({className:e,variant:t="primary",...a}){return(0,s.jsx)("button",{className:u("inline-flex items-center justify-center rounded-xl px-4 py-2 text-sm font-medium transition","disabled:cursor-not-allowed disabled:opacity-60","primary"===t&&"bg-accent text-black hover:shadow-glow focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent/80","secondary"===t&&"border border-line bg-surface-2 text-text hover:border-accent/40 hover:bg-surface",e),...a})}function x({value:e,options:t,onChange:a}){return(0,s.jsx)("div",{className:"inline-flex rounded-xl border border-line bg-surface-2 p-1",children:t.map(t=>(0,s.jsx)("button",{type:"button",onClick:()=>a(t.value),className:u("rounded-lg px-3 py-1.5 text-xs font-semibold transition",e===t.value?"bg-accent text-black":"text-muted hover:text-text"),children:t.label},t.value))})}let p=(0,a(1934).v)(e=>({mode:"paste",network:"bsc-mainnet",sourceCode:"",sourceAddress:"",setMode:t=>e({mode:t}),setNetwork:t=>e({network:t}),setSourceCode:t=>e({sourceCode:t}),setSourceAddress:t=>e({sourceAddress:t})})),f=[{value:"paste",label:"Paste Code"},{value:"upload",label:"Upload File"},{value:"address",label:"BscScan Address"}],m=[{value:"bsc-mainnet",label:"BSC Mainnet"},{value:"bsc-testnet",label:"BSC Testnet"},{value:"opbnb-mainnet",label:"opBNB Mainnet"}];function h(){let e=(0,l.useRouter)(),[t,a]=(0,n.useState)(!1),[o,d]=(0,n.useState)(null),{mode:c,network:u,sourceCode:h,sourceAddress:v,setMode:y,setNetwork:g,setSourceCode:j,setSourceAddress:N}=p(),w=(0,n.useMemo)(()=>"address"===c?v.trim().length>0:h.trim().length>0,[c,v,h]);async function C(e){let t=e.target.files?.[0];t&&(j(await t.text()),y("paste"))}async function k(){if(d(null),!w)return void d("Provide Solidity code or a BscScan contract address.");a(!0);try{let t="address"===c?`// address: ${v}`:h,a=await i(t);e.push(`/analysis/${a.jobId}`)}catch(e){d(e instanceof Error?e.message:"Failed to start analysis.")}finally{a(!1)}}return(0,s.jsxs)(r.P.section,{initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{duration:.4},className:"hud-grid relative w-full max-w-4xl rounded-2xl border border-line bg-surface/70 p-6 backdrop-blur",children:[(0,s.jsxs)("div",{className:"mb-4 flex flex-wrap items-center gap-3",children:[(0,s.jsx)(x,{value:c,options:f,onChange:y}),(0,s.jsx)("select",{value:u,onChange:e=>g(e.target.value),className:"rounded-xl border border-line bg-surface-2 px-3 py-2 text-sm text-text",children:m.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))})]}),"address"!==c&&(0,s.jsx)("textarea",{value:h,onChange:e=>j(e.target.value),placeholder:"Paste Solidity source code here...",className:"h-72 w-full rounded-xl border border-line bg-surface-2 p-4 font-mono text-sm text-text outline-none focus:border-accent/60"}),"upload"===c&&(0,s.jsx)("div",{className:"mt-3",children:(0,s.jsx)("input",{type:"file",accept:".sol",onChange:C,className:"block w-full text-sm text-muted file:mr-4 file:rounded-lg file:border-0 file:bg-accent file:px-3 file:py-2 file:text-sm file:font-semibold file:text-black"})}),"address"===c&&(0,s.jsx)("input",{type:"text",value:v,onChange:e=>N(e.target.value),placeholder:"Paste BscScan contract address or URL",className:"w-full rounded-xl border border-line bg-surface-2 px-4 py-3 text-sm text-text outline-none focus:border-accent/60"}),(0,s.jsxs)("div",{className:"mt-4 flex items-center justify-between gap-3",children:[(0,s.jsx)("p",{className:"text-xs text-muted",children:"This starts an async analysis job and redirects to the HUD progress screen."}),(0,s.jsx)(b,{onClick:k,disabled:t,children:t?"Starting Analysis...":"Analyze Gas"})]}),o&&(0,s.jsx)("p",{className:"mt-3 text-sm text-danger",children:o})]})}},7347:(e,t,a)=>{Promise.resolve().then(a.bind(a,4914)),Promise.resolve().then(a.t.bind(a,8500,23))}},e=>{e.O(0,[246,441,794,358],()=>e(e.s=7347)),_N_E=e.O()}]);