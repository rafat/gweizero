(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{791:(e,t,a)=>{"use strict";a.d(t,{Iw:()=>n,TQ:()=>i,YF:()=>r,pH:()=>o,qi:()=>l});let s="http://127.0.0.1:3001";async function n(e){let t=await fetch(`${s}/api/analyze/jobs`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:e})});if(!t.ok){let e=await t.text();throw Error(`Failed to create analysis job (${t.status}): ${e}`)}return t.json()}async function l(e){let t=await fetch(`${s}/api/analyze/jobs/${e}`,{method:"GET",headers:{"Content-Type":"application/json"},cache:"no-store"});if(!t.ok){let e=await t.text();throw Error(`Failed to fetch analysis job (${t.status}): ${e}`)}return t.json()}async function r(e){let t=await fetch(`${s}/api/analyze/jobs/${e}/cancel`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!t.ok){let e=await t.text();throw Error(`Failed to cancel analysis job (${t.status}): ${e}`)}return t.json()}function o(e){return`${s}/api/analyze/jobs/${e}/events`}function i(e){return"completed"===e||"failed"===e||"cancelled"===e}},1854:(e,t,a)=>{"use strict";a.d(t,{ContractInputCard:()=>p});var s=a(5155),n=a(2115),l=a(3321),r=a(3644),o=a(791),i=a(4474),c=a(1951);function d({value:e,options:t,onChange:a}){return(0,s.jsx)("div",{className:"inline-flex rounded-xl border border-line bg-surface-2 p-1",children:t.map(t=>(0,s.jsx)("button",{type:"button",onClick:()=>a(t.value),className:(0,c.cn)("rounded-lg px-3 py-1.5 text-xs font-semibold transition",e===t.value?"bg-accent text-black":"text-muted hover:text-text"),children:t.label},t.value))})}let u=(0,a(1934).v)(e=>({mode:"paste",network:"bsc-mainnet",sourceCode:"",sourceAddress:"",setMode:t=>e({mode:t}),setNetwork:t=>e({network:t}),setSourceCode:t=>e({sourceCode:t}),setSourceAddress:t=>e({sourceAddress:t})})),b=[{value:"paste",label:"Paste Code"},{value:"upload",label:"Upload File"},{value:"address",label:"BscScan Address"}],x=[{value:"bsc-mainnet",label:"BSC Mainnet"},{value:"bsc-testnet",label:"BSC Testnet"},{value:"opbnb-mainnet",label:"opBNB Mainnet"}];function p(){let e=(0,l.useRouter)(),[t,a]=(0,n.useState)(!1),[c,p]=(0,n.useState)(null),{mode:f,network:m,sourceCode:h,sourceAddress:y,setMode:v,setNetwork:g,setSourceCode:j,setSourceAddress:w}=u(),C=(0,n.useMemo)(()=>"address"===f?y.trim().length>0:h.trim().length>0,[f,y,h]);async function N(e){let t=e.target.files?.[0];t&&(j(await t.text()),v("paste"))}async function $(){if(p(null),!C)return void p("Provide Solidity code or a BscScan contract address.");a(!0);try{let t="address"===f?`// address: ${y}`:h,a=await (0,o.Iw)(t);e.push(`/analysis/${a.jobId}`)}catch(e){p(e instanceof Error?e.message:"Failed to start analysis.")}finally{a(!1)}}return(0,s.jsxs)(r.P.section,{initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{duration:.4},className:"hud-grid relative w-full max-w-4xl rounded-2xl border border-line bg-surface/70 p-6 backdrop-blur",children:[(0,s.jsxs)("div",{className:"mb-4 flex flex-wrap items-center gap-3",children:[(0,s.jsx)(d,{value:f,options:b,onChange:v}),(0,s.jsx)("select",{value:m,onChange:e=>g(e.target.value),className:"rounded-xl border border-line bg-surface-2 px-3 py-2 text-sm text-text",children:x.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))})]}),"address"!==f&&(0,s.jsx)("textarea",{value:h,onChange:e=>j(e.target.value),placeholder:"Paste Solidity source code here...",className:"h-72 w-full rounded-xl border border-line bg-surface-2 p-4 font-mono text-sm text-text outline-none focus:border-accent/60"}),"upload"===f&&(0,s.jsx)("div",{className:"mt-3",children:(0,s.jsx)("input",{type:"file",accept:".sol",onChange:N,className:"block w-full text-sm text-muted file:mr-4 file:rounded-lg file:border-0 file:bg-accent file:px-3 file:py-2 file:text-sm file:font-semibold file:text-black"})}),"address"===f&&(0,s.jsx)("input",{type:"text",value:y,onChange:e=>w(e.target.value),placeholder:"Paste BscScan contract address or URL",className:"w-full rounded-xl border border-line bg-surface-2 px-4 py-3 text-sm text-text outline-none focus:border-accent/60"}),(0,s.jsxs)("div",{className:"mt-4 flex items-center justify-between gap-3",children:[(0,s.jsx)("p",{className:"text-xs text-muted",children:"This starts an async analysis job and redirects to the HUD progress screen."}),(0,s.jsx)(i.$,{onClick:$,disabled:t,children:t?"Starting Analysis...":"Analyze Gas"})]}),c&&(0,s.jsx)("p",{className:"mt-3 text-sm text-danger",children:c})]})}},1951:(e,t,a)=>{"use strict";a.d(t,{cn:()=>l});var s=a(9722),n=a(622);function l(...e){return(0,n.QP)((0,s.$)(e))}},4474:(e,t,a)=>{"use strict";a.d(t,{$:()=>l});var s=a(5155),n=a(1951);function l({className:e,variant:t="primary",...a}){return(0,s.jsx)("button",{className:(0,n.cn)("inline-flex items-center justify-center rounded-xl px-4 py-2 text-sm font-medium transition","disabled:cursor-not-allowed disabled:opacity-60","primary"===t&&"bg-accent text-black hover:shadow-glow focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent/80","secondary"===t&&"border border-line bg-surface-2 text-text hover:border-accent/40 hover:bg-surface",e),...a})}},7347:(e,t,a)=>{Promise.resolve().then(a.bind(a,1854)),Promise.resolve().then(a.t.bind(a,8500,23))}},e=>{e.O(0,[409,240,441,794,358],()=>e(e.s=7347)),_N_E=e.O()}]);